2025-10-30T13:53:55.8807596Z ##[group]Run echo "Running E2E tests against live services..."
2025-10-30T13:53:55.8808252Z [36;1mecho "Running E2E tests against live services..."[0m
2025-10-30T13:53:55.8808877Z [36;1muv run pytest tests/test_real_e2e_api_calls.py -v --tb=short[0m
2025-10-30T13:53:55.8809408Z [36;1mecho "✅ E2E tests passed"[0m
2025-10-30T13:53:55.8840065Z shell: /usr/bin/bash -e {0}
2025-10-30T13:53:55.8840419Z env:
2025-10-30T13:53:55.8840819Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.13/x64
2025-10-30T13:53:55.8841475Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.13/x64/lib/pkgconfig
2025-10-30T13:53:55.8842129Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.13/x64
2025-10-30T13:53:55.8842709Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.13/x64
2025-10-30T13:53:55.8843289Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.13/x64
2025-10-30T13:53:55.8843897Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.13/x64/lib
2025-10-30T13:53:55.8844576Z ##[endgroup]
2025-10-30T13:53:55.8899695Z Running E2E tests against live services...
2025-10-30T13:53:59.4087619Z ============================= test session starts ==============================
2025-10-30T13:53:59.4088727Z platform linux -- Python 3.11.13, pytest-8.4.2, pluggy-1.6.0 -- /home/runner/work/GanShmuel2.0/GanShmuel2.0/weight-service/.venv/bin/python
2025-10-30T13:53:59.4089575Z cachedir: .pytest_cache
2025-10-30T13:53:59.4090059Z rootdir: /home/runner/work/GanShmuel2.0/GanShmuel2.0/weight-service
2025-10-30T13:53:59.4090586Z configfile: pyproject.toml
2025-10-30T13:53:59.4090990Z plugins: anyio-4.11.0, asyncio-1.2.0, cov-7.0.0
2025-10-30T13:53:59.4091868Z asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
2025-10-30T13:53:59.6374444Z collecting ... collected 18 items
2025-10-30T13:53:59.6374719Z 
2025-10-30T13:53:59.6827754Z tests/test_real_e2e_api_calls.py::TestRealAPIHealth::test_health_endpoint_responds PASSED [  5%]
2025-10-30T13:53:59.6887042Z tests/test_real_e2e_api_calls.py::TestRealAPIHealth::test_api_documentation_accessible PASSED [ 11%]
2025-10-30T13:53:59.7212711Z tests/test_real_e2e_api_calls.py::TestRealAPIHealth::test_openapi_spec_available PASSED [ 16%]
2025-10-30T13:53:59.7326276Z tests/test_real_e2e_api_calls.py::TestRealAPIWeightRecording::test_successful_in_transaction PASSED [ 22%]
2025-10-30T13:53:59.7396736Z tests/test_real_e2e_api_calls.py::TestRealAPIWeightRecording::test_input_validation_negative_weight PASSED [ 27%]
2025-10-30T13:53:59.7487133Z tests/test_real_e2e_api_calls.py::TestRealAPIWeightRecording::test_business_logic_out_without_in PASSED [ 33%]
2025-10-30T13:53:59.7599402Z tests/test_real_e2e_api_calls.py::TestRealAPIWeightRecording::test_unit_conversion_lbs_to_kg PASSED [ 38%]
2025-10-30T13:53:59.7690413Z tests/test_real_e2e_api_calls.py::TestRealAPIQueries::test_query_all_transactions PASSED [ 44%]
2025-10-30T13:53:59.7780960Z tests/test_real_e2e_api_calls.py::TestRealAPIQueries::test_query_with_direction_filter PASSED [ 50%]
2025-10-30T13:53:59.7873447Z tests/test_real_e2e_api_calls.py::TestRealAPIQueries::test_unknown_containers_detection PASSED [ 55%]
2025-10-30T13:53:59.7999337Z tests/test_real_e2e_api_calls.py::TestRealAPIQueries::test_item_lookup_truck PASSED [ 61%]
2025-10-30T13:53:59.8110307Z tests/test_real_e2e_api_calls.py::TestRealAPIQueries::test_nonexistent_item_returns_404 PASSED [ 66%]
2025-10-30T13:53:59.8190351Z tests/test_real_e2e_api_calls.py::TestRealAPIPerformance::test_response_time_health_check PASSED [ 72%]
2025-10-30T13:53:59.8291990Z tests/test_real_e2e_api_calls.py::TestRealAPIPerformance::test_response_time_weight_recording PASSED [ 77%]
2025-10-30T13:53:59.8589471Z tests/test_real_e2e_api_calls.py::TestRealAPIPerformance::test_concurrent_requests PASSED [ 83%]
2025-10-30T13:53:59.8924781Z tests/test_real_e2e_api_calls.py::TestRealAPICompleteWorkflow::test_complete_weighing_workflow PASSED [ 88%]
2025-10-30T13:53:59.8985574Z tests/test_real_e2e_api_calls.py::TestRealAPICompleteWorkflow::test_system_remains_healthy_after_operations PASSED [ 94%]
2025-10-30T13:54:00.8772292Z tests/test_real_e2e_api_calls.py::TestRealAPIBatchOperations::test_batch_upload_file_not_found PASSED [100%]
2025-10-30T13:54:00.8773033Z 
2025-10-30T13:54:00.8773179Z ================================ tests coverage ================================
2025-10-30T13:54:00.8773613Z _______________ coverage: platform linux, python 3.11.13-final-0 _______________
2025-10-30T13:54:00.8773891Z 
2025-10-30T13:54:00.8774036Z Name                                Stmts   Miss   Cover   Missing
2025-10-30T13:54:00.8774387Z ------------------------------------------------------------------
2025-10-30T13:54:00.8774768Z src/config.py                          25      1  96.00%   52
2025-10-30T13:54:00.8775143Z src/database.py                        21      5  76.19%   19, 45-49
2025-10-30T13:54:00.8775827Z src/dependencies.py                    21      5  76.19%   23, 28, 33, 38, 43
2025-10-30T13:54:00.8776301Z src/main.py                            33      7  78.79%   21-24, 61, 66, 95, 114
2025-10-30T13:54:00.8777052Z src/metrics.py                          9      2  77.78%   25, 30
2025-10-30T13:54:00.8777688Z src/models/database.py                 56     16  71.43%   47-51, 55, 114-117, 122, 126, 130, 134, 138, 142
2025-10-30T13:54:00.8778536Z src/models/repositories.py            213    173  18.78%   23, 27, 31, 35, 47-50, 54-61, 65-72, 76-82, 86-93, 100-136, 140-145, 149-172, 190-200, 204-209, 213-222, 229-232, 240-260, 267-277, 284-295, 302-323, 329-350, 361-363, 367, 379-389, 398-415, 424-459, 467-478, 482-497
2025-10-30T13:54:00.8779486Z src/models/schemas.py                 178     67  62.36%   43-58, 64-70, 84-95, 115-117, 137-149, 155-162, 179-190, 243, 247-249, 263-265, 284-286, 321-325, 339
2025-10-30T13:54:00.8780037Z src/routers/batch.py                   20     11  45.00%   33-60
2025-10-30T13:54:00.8780447Z src/routers/health.py                  14      6  57.14%   17-23
2025-10-30T13:54:00.8780872Z src/routers/query.py                   56     39  30.36%   42-72, 98-125, 149-172, 191-198
2025-10-30T13:54:00.8781306Z src/routers/weight.py                  20     11  45.00%   38-63
2025-10-30T13:54:00.8781920Z src/services/container_service.py     116     90  22.41%   28-29, 53-76, 93-138, 150-160, 177, 198-212, 227, 236, 248-253, 265-274, 286-291, 309-319, 338-346, 359-372
2025-10-30T13:54:00.8782689Z src/services/file_service.py          198    173  12.63%   30-35, 56-86, 106-206, 227-297, 310-330, 345-356, 371, 383-390, 402-427, 440, 472-481
2025-10-30T13:54:00.8783456Z src/services/query_service.py         155    128  17.42%   21-25, 38-62, 81-88, 107, 129-135, 149-172, 191-213, 236-268, 292-310, 329-337, 358-364, 405-439, 451, 473-491, 499-517, 536-546
2025-10-30T13:54:00.8784286Z src/services/session_service.py       137    111  18.98%   28-30, 51-63, 94-118, 130, 142-151, 175-205, 222-247, 264-291, 308-340, 357-362, 378-404, 426-449, 462, 475-486
2025-10-30T13:54:00.8785026Z src/services/weight_service.py        106     88  16.98%   28-31, 49-66, 80-107, 123-141, 165-207, 231-248, 272-289, 308, 327-353, 370-388
2025-10-30T13:54:00.8786122Z src/utils/calculations.py              79     61  22.78%   22, 34, 47-49, 63-71, 87, 99-108, 120, 132-135, 164-165, 184-185, 201-218, 236-249, 269-270, 288-293, 313-316
2025-10-30T13:54:00.8786894Z src/utils/datetime_utils.py            99     78  21.21%   21-27, 39, 55-64, 77-84, 93-97, 106-117, 126-139, 161-192, 205-208, 220-221, 233-234, 250, 262, 274, 291, 304-306, 318-319, 331-334
2025-10-30T13:54:00.8787900Z src/utils/exceptions.py               294    226  23.13%   15-19, 23, 36-42, 49-53, 60-64, 71-75, 87-97, 104-110, 118-128, 135-141, 149-159, 167-175, 183-193, 205-213, 220-221, 230-242, 250-256, 264-272, 279-280, 287-288, 296-302, 314-322, 329-335, 343-353, 361-369, 377-385, 393-403, 415-423, 431-437, 445-451, 459-467, 484, 505, 520-522, 535-542, 555-566
2025-10-30T13:54:00.8788664Z src/utils/validators.py               138    138   0.00%   3-352
2025-10-30T13:54:00.8788999Z ------------------------------------------------------------------
2025-10-30T13:54:00.8789447Z TOTAL                                1988   1436  27.77%
2025-10-30T13:54:00.8789700Z Coverage HTML written to dir htmlcov
2025-10-30T13:54:00.8789963Z ============================== 18 passed in 1.29s ==============================
2025-10-30T13:54:01.0187723Z ✅ E2E tests passed
